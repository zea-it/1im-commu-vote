<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>1IM Community Vote System</title>
    
    <link rel="icon" href="/1im-commu-vote/icon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Link External CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="user-bar" id="userBar"></div>

    <h1><i class="fa-solid fa-square-poll-vertical"></i> 1IM Community Vote System</h1>
    <div id="timer"><i class="fa-solid fa-spinner fa-spin"></i> กำลังโหลด...</div>

    <div class="gallery" id="gallery">
        <div class="loading-container"><div class="spinner"></div><div class="loading-text">กำลังเชื่อมต่อ...</div></div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="modal" class="modal">
        <span class="close" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></span>
        <a class="prev" onclick="changeImage(-1)">&#10094;</a>
        <a class="next" onclick="changeImage(1)">&#10095;</a>

        <div class="modal-container">
            <!-- 1. รูปภาพ (พื้นที่หลัก) -->
            <div class="image-wrapper" id="imgWrapper">
                <img class="modal-content" id="img01">
            </div>

            <!-- 2. เครื่องมือ (ขวาบน Desktop / ล่างกลาง Mobile) -->
            <div class="image-tools">
                <button class="tool-btn" onclick="zoomImage(0.2)" title="Zoom In"><i class="fa-solid fa-magnifying-glass-plus"></i></button>
                <button class="tool-btn" onclick="zoomImage(-0.2)" title="Zoom Out"><i class="fa-solid fa-magnifying-glass-minus"></i></button>
                <button class="tool-btn" onclick="resetZoom()" title="Reset"><i class="fa-solid fa-compress"></i></button>
                <button class="tool-btn" onclick="toggleFullScreen()" title="Full Screen"><i class="fa-solid fa-expand"></i></button>
            </div>
            
            <!-- 3. แถบข้อมูลด้านล่าง (ลอยตัว สวยงาม) -->
            <div class="bottom-bar">
                <div class="bottom-info">
                    <h3 id="modal-author"><i class="fa-solid fa-user-pen"></i> <span>Author</span></h3>
                </div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <!-- ปุ่มเปิดคอมเมนต์ -->
                    <button class="comment-toggle-btn" onclick="toggleCommentSheet()">
                        <i class="fa-regular fa-comments"></i>
                        <span class="badge" id="comment-count-badge">0</span>
                    </button>
                    <!-- ปุ่มโหวต -->
                    <button id="modal-vote-btn" class="vote-btn" style="width: 140px; padding: 10px;">โหวต</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Comment Sheet (เหมือนกันทั้ง Desktop/Mobile) -->
    <div class="comment-sheet" id="commentSheet">
        <div class="sheet-header">
            <h3><i class="fa-regular fa-comments"></i> ความคิดเห็น</h3>
            <span style="cursor:pointer; font-size:1.2em;" onclick="toggleCommentSheet()"><i class="fa-solid fa-xmark"></i></span>
        </div>
        <div class="sheet-body">
            <div id="comments-list"></div>
        </div>
        <div class="sheet-footer">
            <div id="comment-input-area" class="comment-form">
                <input type="text" class="comment-input" id="comment-input" placeholder="แสดงความคิดเห็น..." maxlength="200">
                <button class="send-btn" onclick="sendComment()"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
            <div id="login-warning" style="display:none; color:red; font-size:0.9em; text-align:center; padding:10px;">
                <i class="fa-brands fa-discord"></i> กรุณา Login เพื่อแสดงความคิดเห็น
            </div>
        </div>
    </div>

    <!-- Privacy Modal -->
    <div class="info-toggle" onclick="openPrivacyModal()"><i class="fa-solid fa-info"></i></div>
    <div id="privacyModal" class="modal">
        <div class="privacy-box">
            <h2><i class="fa-solid fa-shield-halved"></i> ข้อกำหนดและเงื่อนไข</h2>
            <h3><i class="fa-brands fa-discord" style="color:#5865F2;"></i> การเข้าสู่ระบบด้วย Discord</h3>
            <p>
                ระบบการเข้าสู่ระบบด้วย Discord มีวัตถุประสงค์เพื่อ <strong>"การยืนยันตัวตนเท่านั้น"</strong> เพื่อป้องกันการโหวตซ้ำและสแปม 
                กระบวนการ Login ทั้งหมดเกิดขึ้นบนเว็บไซต์ของ Discord โดยตรง ทางเราเพียงแค่รับข้อมูล User ID 
                เพื่อยืนยันสิทธิ์ในการโหวต ไม่มีการเก็บรหัสผ่านหรือเข้าถึงข้อมูลส่วนตัวเชิงลึกอื่น ๆ ของท่าน
            </p>

            <h3><i class="fa-solid fa-copyright" style="color:#ffae00;"></i> ลิขสิทธิ์ผลงาน</h3>
            <p>
                ภาพผลงานที่ปรากฏบนเว็บไซต์นี้ เป็นลิขสิทธิ์ของทางเว็บไซต์และศิลปินเจ้าของผลงานโดยถูกต้อง 
                ห้ามมิให้ผู้ใดทำการคัดลอก ดัดแปลง หรือนำไปใช้แอบอ้างโดยไม่ได้รับอนุญาต 
                ทางเราและศิลปินขอสงวนสิทธิ์ในผลงานของตนเอง
            </p>

            <h3><i class="fa-solid fa-bug" style="color:#f72585;"></i> แจ้งปัญหาการใช้งาน</h3>
            <p>
                หากพบปัญหาในการใช้งานเว็บไซต์ หรือพบเห็นความผิดปกติ สามารถติดต่อผู้ดูแลระบบได้ที่ zc. <br>
                <a href="https://x.com/Izc_it" target="_blank" class="contact-link">
                    <i class="fa-brands fa-x-twitter"></i> https://x.com/Izc_it
                </a>
            </p>

            <button class="close-btn-inner" onclick="closePrivacyModal()">รับทราบ</button>
            <div style="clear:both;"></div>
        </div>
    </div>

    <!-- Link External JS -->
    <script src="script.js"></script>
</body>
</html>
